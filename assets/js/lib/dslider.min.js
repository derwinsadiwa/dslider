/*
 * dSlider v1.0
 * Copyright 2014, Derwin Sadiwa - http://www.derwinsadiwa.com
 * Released under the MIT license - http://opensource.org/licenses/MIT
 * 
 */
!function(e){"use strict";e.fn.dSlider=function(t){var n=e.extend({easing:Power2.easeInOut,timeInterval:3e3,timeBetweenSlides:.8,hasArrowAnimation:!0,hasArrowNavigation:!0,hasDotNavigation:!0},t);return this.each(function(){var t=e(this),i=t.attr("id"),a=e("#"+i+" #slider_content"),s=e("#"+i+" #slider_content img");s.wrap("<figure></figure"),e("#"+i+" #slider_content figure").addClass("slider_content_img");var o=e("#"+i+" #slider_content figure"),l=o[0],c=l.cloneNode(!0);a.append(c);var r=a.children("figure").length,d=o[r-2],v=d.cloneNode(!0);a.prepend(v);var u,h=a.children("figure").length,f=100*h,g=100/h,p=0,m=.3,w={w:e(".slider_content_img").width(),h:e(".slider_content_img").height(),nav_animation:"true"},_=function(){e("#"+i).append('<div id="slider_nav" class="dotstyle dotstyle-dotmove clearfix">');var t=document.getElementById("slider_nav");t.innerHTML+='<ul id="dot-nav"></ul>';for(var a=document.getElementById("dot-nav"),s=1;h-1>s;){var o=document.createElement("li");o.innerHTML+='<a href="javascript:void();">'+s+"</a>",a.appendChild(o),s++}a.appendChild(document.createElement("li")),e("#"+i).append("<nav id='prev_next_btn'><div id='prev_btn'><i class='ion-chevron-left'></i></div>\n<div id='next_btn'><i class='ion-chevron-right'></i></div></nav>");var l=document.getElementById("prev_next_btn");TweenLite.to([e("#prev_btn"),e("#next_btn")],0,{autoAlpha:0}),n.hasDotNavigation||TweenLite.to(t,0,{autoAlpha:0}),n.hasArrowNavigation||TweenLite.to(l,0,{autoAlpha:0})},T=function(){p+=1,TweenLite.to(a,0,{css:{left:-(100*p)+"%"}}),_(),y(),A(),e("#"+i).css({"max-width":w.w+"px","text-align":"center",position:"relative",margin:"0 auto",overflow:"hidden"}),a.css({width:f+"%",position:"relative"}),e(".slider_content_img").css({width:g+"%"})},L=function(){return u=setTimeout(B,n.timeInterval),!1},x=function(t){TweenLite.killTweensOf([e(".dotstyle-dotmove li:last-child"),a]),n.hasNavAnimation?(0>=p?TweenLite.to(e(".dotstyle-dotmove li:last-child"),n.timeBetweenSlides,{css:{left:48*(h-3)},ease:n.easing}):p>=h-1?TweenLite.to(e(".dotstyle-dotmove li:last-child"),n.timeBetweenSlides,{css:{left:48*(t-(h-1))},ease:n.easing}):TweenLite.to(e(".dotstyle-dotmove li:last-child"),n.timeBetweenSlides,{css:{left:48*(t-1)},ease:n.easing}),TweenLite.to(a,n.timeBetweenSlides,{css:{left:-(100*t)+"%"},ease:n.easing})):(0>=p?TweenLite.to(e(".dotstyle-dotmove li:last-child"),0,{css:{left:48*(h-3)},ease:n.easing}):p>=h-1?TweenLite.to(e(".dotstyle-dotmove li:last-child"),0,{css:{left:48*(t-(h-1))},ease:n.easing}):TweenLite.to(e(".dotstyle-dotmove li:last-child"),0,{css:{left:48*(t-1)},ease:n.easing}),TweenLite.to(a,n.timeBetweenSlides,{css:{left:-(100*t)+"%"},ease:n.easing}))},b=function(){0>p?(p=h-2,a.css({left:-(100*p)+"%"}),p-=1,x(p)):p>=h?(p=1,a.css({left:-(100*p)+"%"}),p=2,x(p)):x(p)},B=function(){return p++,b(),L(),!1},y=function(){e("ul#dot-nav li").each(function(t){e(this).click(function(){p=t+1,x(p),clearInterval(u)})}),e("#prev_btn").click(function(){clearInterval(u),p--,b()}),e("#next_btn").click(function(){clearInterval(u),p++,b()}),e("#slider").hover(function(){n.hasNavAnimation?(TweenLite.to([e("#prev_btn"),e("#next_btn")],m,{autoAlpha:1}),TweenLite.to(e("#prev_btn"),m,{css:{scaleX:1,scaleY:1,left:"0px"},ease:Back.easeOut}),TweenLite.to(e("#next_btn"),m,{css:{scaleX:1,scaleY:1,right:"0px"},ease:Back.easeOut})):(TweenLite.to([e("#prev_btn"),e("#next_btn")],m,{autoAlpha:1}),TweenLite.to(e("#prev_btn"),0,{css:{scaleX:1,scaleY:1,left:"0px"},ease:Back.easeOut}),TweenLite.to(e("#next_btn"),0,{css:{scaleX:1,scaleY:1,right:"0px"},ease:Back.easeOut}))},function(){n.hasNavAnimation?(TweenLite.to([e("#prev_btn"),e("#next_btn")],m,{autoAlpha:0}),TweenLite.to(e("#prev_btn"),m,{css:{scaleX:1,scaleY:1,left:"70px"},ease:Back.easeIn}),TweenLite.to(e("#next_btn"),m,{css:{scaleX:1,scaleY:1,right:"70px"},ease:Back.easeIn})):(TweenLite.to([e("#prev_btn"),e("#next_btn")],m,{autoAlpha:0}),TweenLite.to(e("#prev_btn"),0,{css:{scaleX:1,scaleY:1,left:"0px"},ease:Back.easeIn}),TweenLite.to(e("#next_btn"),0,{css:{scaleX:1,scaleY:1,right:"0px"},ease:Back.easeIn}))})},A=function(){var t=[];e("#slider_content figure").each(function(t){var n=document.getElementsByTagName("figure");n[t].innerHTML+='<i class="icon ion-ios7-reloading"></i>';document.getElementsByClassName("ion-ios7-reloading");e(".ion-ios7-reloading").css({display:"block",position:"absolute",left:w.w/2-e(".ion-ios7-reloading").width()/2+"px",top:w.h/2-e(".ion-ios7-reloading").height()/2+"px"})}),e("#"+i+" figure img").each(function(e){t[e]=new Image,t[e].onLoad=I(e)})},I=function(){e(".ion-ios7-reloading").css({display:"none"})};T(),L()})}}(jQuery);